<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo</title>
    <script src="client.js"></script>
</head>
<body>
    <form name="messenger">
        <label>Message:<input name="message" value="test message"></label>
        <button name="send">Send</button>
    </form>

<script type="text/javascript">
    let socketEvents = new SocketEvents();
    socketEvents.open('ws://localhost:3000', function() {
        socketEvents.setBinaryType('blob');

        socketEvents.on('chatroom', function(message) {
            console.log(message + '!usual');
        });

        socketEvents.on('chatroom-binary', function(message) {
            console.log(typeof message);
        });

        let form = document.forms.messenger;
        form.onsubmit = function() {
            return false;
        };
        form.elements.send.onclick = function() {
            socketEvents.sendBinary('chatroom-binary', new Blob(['235235']));
            socketEvents.send('chatroom', form.elements.message.value + '!json');
        };
    });
</script>
</body>
</html>